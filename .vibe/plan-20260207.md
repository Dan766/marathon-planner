# Implementation Plan: Marathon Training Plan Generator

## Tech Stack
- **Framework**: React 18 + TypeScript
- **Build**: Vite 5
- **PWA**: vite-plugin-pwa
- **Styling**: Tailwind CSS
- **State**: Zustand (lightweight, persistent)
- **Router**: React Router v6
- **Dates**: date-fns
- **ICS**: ics npm package
- **Notifications**: Firebase Cloud Messaging
- **Deploy**: Firebase Hosting

## Project Structure
```
src/
├── components/
│   ├── ui/              # Reusable UI components (Button, Card, etc.)
│   ├── wizard/          # Step-by-step plan creation wizard
│   │   ├── StepPlanSelect.tsx
│   │   ├── StepDateConfig.tsx
│   │   ├── StepCustomize.tsx
│   │   └── StepPreview.tsx
│   ├── calendar/        # Calendar preview components
│   │   ├── CalendarGrid.tsx
│   │   └── WeekRow.tsx
│   └── tracking/        # Progress tracking components
│       ├── WorkoutCard.tsx
│       └── ProgressDashboard.tsx
├── data/
│   └── plans.ts         # All 6 Hal Higdon plans encoded
├── hooks/
│   ├── usePlanGenerator.ts
│   └── useCalendarExport.ts
├── lib/
│   ├── ics-generator.ts # ICS file generation
│   ├── plan-engine.ts   # Date calculation, plan scheduling
│   └── notifications.ts # Push notification setup
├── store/
│   └── store.ts         # Zustand store (plan, progress, preferences)
├── pages/
│   ├── HomePage.tsx
│   ├── PlanBuilderPage.tsx
│   ├── PlanViewPage.tsx
│   └── ProgressPage.tsx
├── App.tsx
├── main.tsx
└── index.css
```

## Execution Order (Phase 3)

### Step 1: Project Scaffolding
- Vite + React + TypeScript init
- Tailwind CSS setup
- PWA plugin config
- Firebase config
- Router setup

### Step 2: Training Plan Data
- Encode all 6 Hal Higdon plans in TypeScript
- Type definitions for Plan, Week, Day, Workout
- Plan metadata (name, description, difficulty, weeks)

### Step 3: Plan Engine
- Race date → backward calculation to start date
- Day-of-week alignment
- Rest day swapping logic
- Plan customization engine

### Step 4: Wizard UI
- Step 1: Plan selection (cards with difficulty levels)
- Step 2: Race date picker + start day selector
- Step 3: Customize rest days / swap workouts
- Step 4: Full plan preview with calendar grid

### Step 5: ICS Export
- Generate VCALENDAR with all workout events
- Each event: summary, date, description with workout details
- Download trigger (Blob URL)

### Step 6: Progress Tracking
- Zustand store with localStorage persistence
- Check off completed workouts
- Progress dashboard with stats

### Step 7: Nice-to-Haves
- Push notifications (FCM)
- Plan regeneration for missed days
- Share via URL (encode plan config in URL params)
- Print-friendly CSS

### Step 8: PWA & Deploy
- Service worker config
- Manifest with icons
- Firebase Hosting deploy
